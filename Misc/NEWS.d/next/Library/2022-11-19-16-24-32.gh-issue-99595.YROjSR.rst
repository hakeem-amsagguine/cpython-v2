When a proxy derived from ``multiprocessing.managers.BaseProxy`` is passed between processes, the ``self._manager`` attribute becomes ``None``. ``self._manager`` is however accessed to retrieve its ``_registry`` attribute, which contain the ``method_to_typeid`` map recorded into the manager via ``BaseManager.register()``, causing an ``AttributeError``. This change decouples the role of the manager from the role of the registry and propagates the registry separately to fix the issue.
